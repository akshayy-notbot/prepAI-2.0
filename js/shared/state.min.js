class PrepAIState{constructor(){this.storageKey='prepai_state',this.interviewConfig={role:null,seniority:null,skills:[]},this.sessionId:null,this.interviewId:null,this.transcript=[],this.loadState()}loadState(){try{const e=sessionStorage.getItem(this.storageKey);e&&(Object.assign(this,JSON.parse(e)),this.interviewConfig=this.interviewConfig||{role:null,seniority:null,skills:[]},this.transcript=this.transcript||[])}catch(e){console.error('Error loading state:',e)}}saveState(){try{sessionStorage.setItem(this.storageKey,JSON.stringify({interviewConfig:this.interviewConfig,sessionId:this.sessionId,interviewId:this.interviewId,transcript:this.transcript}))}catch(e){console.error('Error saving state:',e)}}resetState(){this.interviewConfig={role:null,seniority:null,skills:[]},this.sessionId=null,this.interviewId=null,this.transcript=[],this.saveState()}updateInterviewConfig(e){this.interviewConfig={...this.interviewConfig,...e},this.saveState()}setSessionData(e,t){this.sessionId=e,this.interviewId=t,this.saveState()}addToTranscript(e){this.transcript.push(e),this.saveState()}getStateSummary(){const e=this.interviewConfig;return{hasRole:!!e.role,hasSeniority:!!e.seniority,hasSkills:e.skills&&e.skills.length>0,isComplete:!!(e.role&&e.seniority&&e.skills&&e.skills.length>0)}}canProceedTo(e){const t=this.getStateSummary();switch(e){case'onboarding':return!0;case'dashboard':return t.hasRole&&t.hasSeniority&&t.hasSkills;case'interview-prep':return t.isComplete;case'interview':return t.isComplete;default:return!1}}}const prepAIState=new PrepAIState;typeof module!="undefined"&&module.exports?module.exports={PrepAIState,prepAIState}:window.prepAIState=prepAIState;
